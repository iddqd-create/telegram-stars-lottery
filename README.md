# Telegram Stars Lottery - –ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π

–≠—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ Telegram Mini App, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –ª–æ—Ç–µ—Ä–µ–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Telegram Stars**. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –±—ç–∫–µ–Ω–¥–∞ –Ω–∞ Flask (Python), —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–∞ —á–∏—Å—Ç–æ–º JavaScript –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –≤–æ–≤–ª–µ—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Stars:** –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Stars –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∫–æ–º–Ω–∞—Ç—É.
- **–ò–≥—Ä–æ–≤—ã–µ –∫–æ–º–Ω–∞—Ç—ã:** –ö–æ–º–Ω–∞—Ç—ã –Ω–∞ 6 —á–µ–ª–æ–≤–µ–∫ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–∞–≤–∫–∞–º–∏ (50, 100, 250, 500 Stars).
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–æ–≤:** –ü–æ–±–µ–¥–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç 80% –æ—Ç –æ–±—â–µ–≥–æ –ø—É–ª–∞, 20% —É—Ö–æ–¥–∏—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.
- **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –ò–≥—Ä–æ–∫–∏ –≤–∏–¥—è—Ç, –∫–∞–∫ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–Ω–∞—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, —Å –ø–æ–º–æ—â—å—é Server-Sent Events (SSE).
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** –ü—Ä–∏—è—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –∑–∞–≥—Ä—É–∑–∫–∏, –æ–∂–∏–¥–∞–Ω–∏—è –∏ —Ä–æ–∑—ã–≥—Ä—ã—à–∞.
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —Ä–æ–∑—ã–≥—Ä—ã—à–∞ –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç Telegram –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—ç–∫–µ–Ω–¥–∞.
- **–ù—É–ª–µ–≤–æ–π –±—é–¥–∂–µ—Ç:** –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö.

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **–ë—ç–∫–µ–Ω–¥:** Python, Flask, Gunicorn
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥:** HTML, CSS, JavaScript (Vanilla)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** SQLite
- **API Telegram:** Bot API, WebApp API
- **Real-time:** Server-Sent Events (SSE)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/telegram-stars-lottery
‚îú‚îÄ‚îÄ frontend/              # –§–∞–π–ª—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (HTML, CSS, JS)
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ styles.css
‚îÇ   ‚îî‚îÄ‚îÄ app.js
‚îú‚îÄ‚îÄ app.py                 # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (API, Webhook)
‚îú‚îÄ‚îÄ bot.py                 # –õ–æ–≥–∏–∫–∞ Telegram-–±–æ—Ç–∞ (–∫–æ–º–∞–Ω–¥—ã, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
‚îú‚îÄ‚îÄ lottery_engine.py      # –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Ä–æ–∑—ã–≥—Ä—ã—à–∞
‚îú‚îÄ‚îÄ scheduler.py           # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ lottery.db             # –§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite
‚îú‚îÄ‚îÄ .gitignore             # –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ Git
‚îú‚îÄ‚îÄ .env.example           # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é (–Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö)

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞

1.  –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ **@BotFather**.
2.  –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `/newbot`.
3.  –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏–º—è –∏ username –¥–ª—è –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (username –¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `bot`).
4.  **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω**, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–¥–∞—Å—Ç BotFather. –≠—Ç–æ –≤–∞—à `BOT_TOKEN`.

### –®–∞–≥ 2: –î–µ–ø–ª–æ–π –±—ç–∫–µ–Ω–¥–∞ –Ω–∞ Render.com

Render –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—à–µ–≥–æ –±—ç–∫–µ–Ω–¥–∞.

1.  **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Render.com](https://render.com/)** —Å –ø–æ–º–æ—â—å—é —Å–≤–æ–µ–≥–æ GitHub-–∞–∫–∫–∞—É–Ω—Ç–∞.
2.  **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub** –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –≤ –Ω–µ–≥–æ –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞.
3.  –ù–∞ –¥–∞—à–±–æ—Ä–¥–µ Render –Ω–∞–∂–º–∏—Ç–µ **New +** -> **Web Service**.
4.  –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Å–≤–æ–π GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –µ–≥–æ.
5.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–∏—Å–∞:**
    -   **Name:** –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏–º—è –¥–ª—è –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `stars-lottery-backend`).
    -   **Region:** –í—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π –∫ –≤–∞–º —Ä–µ–≥–∏–æ–Ω.
    -   **Branch:** `main` (–∏–ª–∏ –≤–∞—à–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞).
    -   **Root Directory:** –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º.
    -   **Runtime:** `Python 3`.
    -   **Build Command:** `pip install -r requirements.txt`.
    -   **Start Command:** `gunicorn app:app`.
    -   **Instance Type:** `Free`.

6.  –ù–∞–∂–º–∏—Ç–µ **Advanced** –∏ –¥–æ–±–∞–≤—å—Ç–µ **–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Environment Variables)**:
    -   `BOT_TOKEN`: –í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç BotFather.
    -   `PYTHON_VERSION`: `3.11.0` (–∏–ª–∏ –¥—Ä—É–≥–∞—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è).

7.  –ù–∞–∂–º–∏—Ç–µ **Create Web Service**. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç —Å–±–æ—Ä–∫—É –∏ –¥–µ–ø–ª–æ–π –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
8.  –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è **—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞** (–≤–∏–¥–∞ `https://your-service-name.onrender.com`). –≠—Ç–æ –≤–∞—à `WEBHOOK_URL`.

### –®–∞–≥ 3: –î–µ–ø–ª–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–∞ GitHub Pages

GitHub Pages - —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∞–π—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—à–µ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

1.  –í –≤–∞—à–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞ GitHub –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** -> **Pages**.
2.  –í —Ä–∞–∑–¥–µ–ª–µ **Build and deployment** –≤—ã–±–µ—Ä–∏—Ç–µ **Source:** `Deploy from a branch`.
3.  **Branch:**
    -   –í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ç–∫—É `main`.
    -   –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É `/frontend`.
    -   –ù–∞–∂–º–∏—Ç–µ **Save**.
4.  –ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –≤–∞—à —Å–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `https://<your-username>.github.io/<repository-name>/`.
5.  **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç URL**. –≠—Ç–æ –≤–∞—à `WEBAPP_URL`.

### –®–∞–≥ 4: –§–∏–Ω–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

1.  **–û–±–Ω–æ–≤–∏—Ç–µ URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –≤ –∫–æ–¥–µ:**
    -   –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `frontend/app.js`.
    -   –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É `const API_BASE_URL = ...` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ `YOUR_BACKEND_URL` –Ω–∞ –≤–∞—à URL —Å Render (`WEBHOOK_URL`).
    -   –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏—Ö –Ω–∞ GitHub.

2.  **–î–æ–±–∞–≤—å—Ç–µ URL –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Render:**
    -   –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ Render.
    -   –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Environment**.
    -   –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
        -   `WEBHOOK_URL`: URL –≤–∞—à–µ–≥–æ –±—ç–∫–µ–Ω–¥–∞ –Ω–∞ Render (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://stars-lottery-backend.onrender.com`).
        -   `WEBAPP_URL`: URL –≤–∞—à–µ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–∞ GitHub Pages.
    -   Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å —Å –Ω–æ–≤—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏.

3.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Webhook –¥–ª—è –±–æ—Ç–∞:**
    -   –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±—ç–∫–µ–Ω–¥–∞ –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤–µ–±—Ö—É–∫ –¥–ª—è –≤–∞—à–µ–≥–æ –±–æ—Ç–∞. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ, –ø–µ—Ä–µ–π–¥—è –ø–æ —Å—Å—ã–ª–∫–µ:
        `https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo`
    -   –í –æ—Ç–≤–µ—Ç–µ –ø–æ–ª–µ `url` –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤–∞—à `WEBHOOK_URL` —Å –ø—Ä–∏–ø–∏—Å–∫–æ–π `/webhook`.

4.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Mini App –≤ BotFather:**
    -   –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ **@BotFather**.
    -   –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/mybots`, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞.
    -   –ù–∞–∂–º–∏—Ç–µ **Bot Settings** -> **Menu Button**.
    -   –í—ã–±–µ—Ä–∏—Ç–µ **Configure Menu Button**.
    -   –û—Ç–ø—Ä–∞–≤—å—Ç–µ URL –≤–∞—à–µ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (`WEBAPP_URL`).
    -   –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –∫–Ω–æ–ø–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Play Lottery`).

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram, –Ω–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é –∏ –Ω–∞—á–∞—Ç—å –∏–≥—Ä–∞—Ç—å!
